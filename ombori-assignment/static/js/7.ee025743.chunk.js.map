{"version":3,"sources":["components/templates/appTemplate.js","api/errorObject.js","api/interceptors.js","api/endpoints.js","api/index.js","services/user.js","components/organisms/usersList.js","components/pages/Users.js"],"names":["Header","styled","PageHeader","COLORS","PRIMARY","TEXT_LIGHT","AppTemplate","title","back","children","onBack","span","errorObject","error","errorResponse","errorCode","message","response","data","code","errors","length","description","fail","statusCode","get","errorResponseHandler","a","successResponseHandler","pageDetails","page","total","total_pages","per_page","USERS_BY_ID","userId","contentType","api","config","headers","this","instance","baseURL","timeout","axios","create","interceptors","use","url","id","params","endpoint","body","post","delete","put","patch","getAllUsers","filters","undefined","then","res","getUser","deleteUser","ListContainer","List","UsersList","users","loading","hasMore","handleInfiniteOnLoad","handleDelete","initialLoad","pageStart","loadMore","itemLayout","dataSource","renderItem","item","Item","actions","onConfirm","href","to","Meta","avatar","src","first_name","last_name","email","className","type","UsersContainer","useState","setLoading","setUsers","setFilters","setHasMore","errorContext","useContext","ErrorContext","notificationContext","NotificationContext","useEffect","setError","fetchUsers","concat","userIndex","findIndex","user","mutatedUsers","deletedUser","splice","setNotification"],"mappings":"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","file":"static/js/7.ee025743.chunk.js","sourcesContent":["import React from 'react';\nimport { PageHeader, Row, Col } from 'antd';\nimport styled from 'styled-components';\n\nimport { COLORS } from '../../config';\n\nconst Header = styled(PageHeader)`\n  background: ${COLORS.PRIMARY};\n\n  span {\n    color: ${COLORS.TEXT_LIGHT};\n    font-weight: 600;\n    font-size: 1.5rem;\n  }\n`;\n\nconst AppTemplate = ({ title, back, children }) => {\n  return (\n    <>\n      <Header title={title} onBack={back} />\n      <Row>\n        <Col span={24}>{children}</Col>\n      </Row>\n    </>\n  );\n};\n\nexport default AppTemplate;\n","import { get } from 'lodash-es';\n\nconst errorObject = error => {\n  let errorResponse;\n  let errorCode;\n  let { message } = error;\n\n  if (error.response && error.response.data) {\n    errorResponse = error.response.data;\n    if (errorResponse.code) {\n      errorCode = errorResponse.code;\n    }\n\n    if (errorResponse.errors && errorResponse.errors.length) {\n      const { title, description } = errorResponse.errors[0];\n      message = `${title}: ${description}`;\n    }\n  }\n\n  return {\n    data: errorResponse && errorResponse.errors ? errorResponse.errors : errorResponse,\n    error,\n    fail: true,\n    message,\n    statusCode: error.code || errorCode || get(error, 'response.status'),\n  };\n};\n\nexport default errorObject;\n","import { get } from 'lodash-es';\nimport errorObject from './errorObject';\n\nexport const errorResponseHandler = async error => {\n  let { message } = error;\n\n  if (error && (get(error, 'status') === 403 || get(error, 'response.status') === 403)) {\n    message = \"You're UnAuthorized, check login or user privileges\";\n  }\n\n  if (error && (get(error, 'status') === 404 || get(error, 'response.status') === 404)) {\n    message = 'Not Found';\n  }\n\n  if (error && (get(error, 'status') === 503 || get(error, 'response.status')) === 503) {\n    message = 'Internal Server Error';\n  }\n\n  if (error) {\n    error.message = message;\n    throw errorObject(error);\n  }\n};\n\nexport function successResponseHandler(response) {\n  const data = get(response, 'data');\n\n  const pageDetails = {\n    page: data.page,\n    total: data.total,\n    total_pages: data.total_pages,\n    per_page: data.per_page,\n  };\n\n  return {\n    ...response,\n    data: response.data.data,\n    pageDetails,\n  };\n}\n","export const BASE_URL = 'https://reqres.in/api/';\n\nexport const USERS = 'users';\nexport const USERS_BY_ID = userId => `${USERS}/${userId}`;\n","import axios from 'axios';\n\nimport { successResponseHandler, errorResponseHandler } from './interceptors';\nimport { BASE_URL } from './endpoints';\n\nconst contentType = {\n  json: 'application/json',\n  multipart: 'multipart/form-data',\n};\n\nexport default class API {\n  constructor(\n    config = {\n      headers: { contentType: contentType.json },\n    }\n  ) {\n    this.config = {};\n    this.instance = null;\n\n    this.config = {\n      baseURL: config.baseURL || BASE_URL,\n      headers: {\n        'Content-Type': config.headers.contentType || contentType.json,\n      },\n      timeout: 3000,\n    };\n\n    this.instance = axios.create(this.config);\n    this.instance.interceptors.response.use(successResponseHandler, errorResponseHandler);\n  }\n\n  get(url, id, params) {\n    let endpoint = url;\n    if (id) {\n      endpoint += `/${id}`;\n    }\n    return this.instance.get(endpoint, { params });\n  }\n\n  post(url, body) {\n    return this.instance.post(url, body);\n  }\n\n  delete(url, id) {\n    return this.instance.delete(`${url}/${id}`);\n  }\n\n  put(url, body, id) {\n    let endpoint = url;\n    if (id) {\n      endpoint += `/${id}`;\n    }\n    return this.instance.put(endpoint, body);\n  }\n\n  patch(url, body) {\n    return this.instance.patch(url, body);\n  }\n}\n","import API from '../api';\nimport { USERS, USERS_BY_ID } from '../api/endpoints';\n\nconst api = new API();\n\nexport const getAllUsers = async filters =>\n  api.get(USERS, undefined, filters).then(\n    res => res,\n    error => {\n      throw error;\n    }\n  );\n\nexport const getUser = async userId =>\n  api.get(USERS_BY_ID(userId)).then(\n    res => res,\n    error => {\n      throw error;\n    }\n  );\n\nexport const deleteUser = async userId =>\n  api.delete(USERS, userId).then(\n    res => res,\n    error => {\n      throw error;\n    }\n  );\n","import React from 'react';\nimport { List, Avatar, Alert, Popconfirm, Spin } from 'antd';\nimport styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport InfiniteScroll from 'react-infinite-scroller';\n\nconst ListContainer = styled(List)`\n  margin: 10px 20px;\n`;\n\nconst UsersList = ({ users, loading, hasMore, handleInfiniteOnLoad, handleDelete }) => (\n  <InfiniteScroll initialLoad={false} pageStart={0} hasMore={hasMore} loadMore={handleInfiniteOnLoad}>\n    <ListContainer\n      loading={loading}\n      itemLayout=\"horizontal\"\n      dataSource={users}\n      renderItem={item => (\n        <List.Item\n          actions={[\n            <Popconfirm\n              title=\"Are you sure\"\n              onConfirm={() => {\n                handleDelete(item.id);\n              }}\n            >\n              <a href=\"#\">delete</a>\n            </Popconfirm>,\n            <Link to={`/${item.id}`}>more</Link>,\n          ]}\n        >\n          <List.Item.Meta\n            avatar={<Avatar src={item.avatar} />}\n            title={<Link to={`/${item.id}`}>{`${item.first_name} ${item.last_name}`}</Link>}\n            description={item.email}\n          />\n        </List.Item>\n      )}\n    >\n      {loading && hasMore && (\n        <div className=\"demo-loading-container\">\n          <Spin />\n        </div>\n      )}\n      {!hasMore && <Alert message=\"Loaded All\" type=\"info\" />}\n    </ListContainer>\n  </InfiniteScroll>\n);\n\nexport default UsersList;\n","import React, { useState, useEffect, useContext } from 'react';\n\nimport AppTemplate from '../templates/appTemplate';\nimport { getAllUsers, deleteUser } from '../../services/user';\nimport ErrorContext from '../../shared/error/context';\nimport NotificationContext from '../../shared/notifications/context';\nimport UsersList from '../organisms/usersList';\n\nconst UsersContainer = () => {\n  const [loading, setLoading] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [filters, setFilters] = useState({\n    page: 1,\n    total: 0,\n    total_pages: 0,\n    per_page: 10,\n  });\n  const [hasMore, setHasMore] = useState(true);\n\n  const errorContext = useContext(ErrorContext);\n  const notificationContext = useContext(NotificationContext);\n\n  useEffect(() => {\n    async function fetchUsers() {\n      setLoading(true);\n      try {\n        const res = await getAllUsers(filters);\n        setUsers(res.data);\n        setFilters(res.pageDetails);\n      } catch (e) {\n        errorContext.setError(e, true);\n      }\n      setLoading(false);\n    }\n\n    fetchUsers();\n  }, []);\n\n  const handleInfiniteOnLoad = async () => {\n    if (users.length > filters.per_page) {\n      setHasMore(false);\n    } else {\n      setLoading(true);\n      const res = await getAllUsers(filters);\n      setUsers(users.concat(res.data));\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async id => {\n    try {\n      setLoading(true);\n      await deleteUser(id);\n      const userIndex = users.findIndex(user => user.id === id);\n      if (userIndex > -1) {\n        const mutatedUsers = [...users];\n        const deletedUser = mutatedUsers.splice(userIndex, 1);\n        setUsers(mutatedUsers);\n        setLoading(false);\n        notificationContext.setNotification(\n          {\n            type: 'success',\n            message: `${deletedUser[0].first_name} ${deletedUser[0].last_name} deleted`,\n          },\n          true\n        );\n      }\n    } catch (e) {\n      errorContext.setError(e);\n      setLoading(false);\n    }\n  };\n\n  return (\n    <AppTemplate title=\"Users\">\n      <UsersList\n        users={users}\n        loading={loading}\n        hasMore={hasMore}\n        handleInfiniteOnLoad={handleInfiniteOnLoad}\n        handleDelete={handleDelete}\n      />\n    </AppTemplate>\n  );\n};\n\nexport default UsersContainer;\n"],"sourceRoot":""}